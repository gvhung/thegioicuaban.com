(function($){HttpClient=function(b){var a=this;this.completed=null;this.errorHandler=null;this.errorMessage="";this.async=true;this.evalResult=false;this.contentType="application/x-www-form-urlencoded";this.accepts=null;this.method="GET";this.timeout=2e4;this.headers={};$.extend(a,b);this.appendHeader=function(b,c){a.headers[b]=c};this.send=function(e,d,c,b){c=c||a.completed;b=b||a.errorHandler;$.ajax({url:e,data:d,type:d?"POST":a.method,processData:false,contentType:a.contentType,timeout:a.timeout,dataType:"text",global:false,async:a.async,beforeSend:function(c){for(var b in a.headers)c.setRequestHeader(b,a.headers[b]);a.accepts&&c.setRequestHeader("Accept",a.accepts)},success:function(d){var e=null;if(a.evalResult)try{d=JSON.parseWithDate(d);if(d&&d.hasOwnProperty("d"))d=d.d}catch(f){e=new CallbackException(f)}if(e||d&&(d.isCallbackError||d.iscallbackerror)){if(d)e=d;b&&b(e,a);return}c&&c(d,a)},error:function(d,f){var c=null;if(d.readyState==4){var e=d.responseText;if(e&&e.charAt(0)=="{")c=JSON.parseWithDate(e);if(!c){if(d.status&&d.status!=200)c=new CallbackException(d.status+" "+d.statusText);else c=new CallbackException("Callback Error: "+f);c.detail=e}}if(!c)c=new CallbackException("Callback Error: "+f);b&&b(c,a,d)}})};this.returnError=function(b){var c=new CallbackException(b);a.errorHandler&&a.errorHandler(c,a)}};ServiceProxy=function(b){var a=this;this.isWcf=true;this.timeout=2e4;this.method="POST";this.serviceUrl=b;typeof b==="object"&&$.extend(this,b);this.invoke=function(f,b,e,d){var c=null;if(a.method!="GET")c=a.isWcf?JSON.stringifyWcf(b):JSON.stringify(b);var h=a.serviceUrl+f,g=new HttpClient({contentType:"application/json",accepts:"application/json,text/*",method:a.method,evalResult:true,timeout:a.timeout});g.send(h,c,e,d)}};AjaxMethodCallback=function(b,d,c){var a=this;this.controlId=b;this.postbackMode="PostMethodParametersOnly";this.serverUrl=d;this.formName=null;this.resultMode="json";this.timeout=2e4;this.completed=null;this.errorHandler=null;$.extend(this,c);this.Http=null;this.callMethod=function(i,c,j,h){a.completed=j;a.errorHandler=h;var f=new HttpClient({timeout:a.timeout,evalResult:true,accepts:"application/json,text/*"});a.Http=f;var b={};if(a.resultMode=="msajax")b=JSON.stringifyWithDates(c);else{var e=0;if(c.length){e=c.length;for(var d=0;d<e;d++)b["Parm"+(d+1).toString()]=JSON.stringify(c[d])}$.extend(b,{CallbackMethod:i,CallbackParmCount:e,__WWEVENTCALLBACK:a.controlId});b=$.param(b)+"&"}var g=a.formName||document.forms.length>0?document.forms[0].id:"";if(a.postbackMode=="Post")b+=$("#"+g).serialize();else if(a.postbackMode=="PostNoViewstate")b+=$("#"+g).serializeNoViewState();else if(this.postbackMode=="Get"){Url=this.serverUrl;if(Url.indexOf("?")>-1)Url+=b;else Url+="?"+b;return f.send(Url,null,a.onHttpCallback,a.onHttpCallback)}return f.send(this.serverUrl,b,a.onHttpCallback,a.onHttpCallback)};this.onHttpCallback=function(b){if(b&&(b.isCallbackError||b.iscallbackerror)){a.errorHandler&&a.errorHandler(b,a);return}a.completed!=null&&a.completed(b,a)}};ajaxJson=function(g,c,h,f,e){var d=c,a={method:"POST",contentType:"application/json",noPostEncoding:false};$.extend(a,e);var b=new HttpClient(a);b.evalResult=true;if(!a.noPostEncoding&&a.method=="POST")d=JSON.stringify(c);b.send(g,d,h,f)};ajaxCallMethod=function(f,a,b,g,d,e){var c=new AjaxMethodCallback(null,f,e);c.callMethod(a,b,g,d)};$.postJSON=function(f,a,g,d,e){var b={method:"POST",evalResult:true};$.extend(b,e);var c=new HttpClient(b);if(typeof a==="object")a=$.param(a);c.send(f,a,g,d)};onPageError=function(a){showStatus(a.message||a.Message,6e3,true)};CallbackException=function(a,b){this.isCallbackError=true;if(typeof a=="object"){if(a.message)this.message=a.message;else if(a.Message)this.message=a.Message}else this.message=a;if(b)this.detail=b;else this.detail=null};StatusBar=function(d,c){var a=this,b=null;this.elementId="_showstatus";this.prependMultiline=true;this.showCloseButton=false;this.afterTimeoutText=null;this.cssClass="statusbar";this.highlightClass="statusbarhighlight";this.closeButtonClass="statusbarclose";this.additive=false;if(d)b=$(d);c&&$.extend(this,c);if(!b)b=$("<div id='_statusbar' class='"+a.cssClass+"'><div class='"+a.closeButtonClass+"'>"+(a.showCloseButton?" X </div></div>":"")).appendTo(document.body).show();a.showCloseButton&&$("."+a.cssClass).click(function(){$(b).hide()});this.show=function(c,d){if(c=="hide")return a.hide();if(a.additive){var e=$("<div style='margin-bottom: 2px;'>"+c+"</div>");if(a.prependMultiline)b.prepend(e);else b.append(e)}else if(!a.showCloseButton)b.text(c);else{var f=b.find("div.statusbarclose");b.text(c).prepend(f)}b.show().maxZIndex();if(d){b.addClass(a.highlightClass);setTimeout(function(){b.removeClass(a.highlightClass);a.afterTimeoutText&&a.show(a.afterTimeoutText)},d)}return a};this.hide=function(){b.hide();return a};this.release=function(){_statusbar&&$(_statusbar).remove()}};var __statusbar=null;showStatus=function(a,d,b,c){if(!__statusbar)if(typeof a=="object"){__statusbar=(new StatusBar(null,a)).hide();return}else __statusbar=new StatusBar;__statusbar.show(a,d,b,c)};$.fn.centerInClient=function(b){var a={forceAbsolute:false,container:window,completed:null};$.extend(a,b);return this.each(function(){var b=$(this),c=$(a.container),f=a.container==window;if(a.forceAbsolute)if(f)b.remove().appendTo("body");else b.remove().appendTo(c[0]);b.css("position","absolute");var h=2.2,d=(f?c.width():c.outerWidth())/2-b.outerWidth()/2,e=(f?c.height():c.outerHeight())/h-b.outerHeight()/2;d=d+c.scrollLeft();e=e+c.scrollTop();e=e<5?5:e;d=d<5?5:d;b.css({left:d,top:e});var g=b.css("zIndex");(!g||g=="auto")&&b.css("zIndex",1);a.completed&&a.completed(this)})};$.fn.moveToMousePosition=function(b,c){var a={left:0,top:0};$.extend(a,c);return this.each(function(){var c=$(this);c.css({left:b.pageX+a.left,top:b.pageY+a.top,position:"absolute"})})};$.fn.shadow=function(b,c){if(typeof b=="object")c=b;var a={offset:5,color:"#636363",opacity:.45,callback:null,zIndex:100};$.extend(a,c);this.each(function(){var c=$(this),e=this,g=c.get(0).id,d=$("#"+g+"Shadow");if(typeof b=="string"){if(b=="hide"||b=="remove")if(typeof e.style.boxShadow=="string")c.css("box-shadow","");else if(typeof e.style.MozBoxShadow=="string")c.css("-moz-box-shadow","");else if(typeof e.style.WebkitBoxShadow=="string")c.css("-webkit-box-shadow","");else{c.unwatch("_shadowMove");d.remove()}return}d.length<1&&c.makeAbsolute();if(typeof e.style.boxShadow=="string"){c.css("box-shadow",String.format("{0}px {0}px {0}px {1}",a.offset,a.color));return}else if(typeof e.style.MozBoxShadow=="string"){c.css("-moz-box-shadow",String.format("{0}px {0}px {0}px {1}",a.offset,a.color));return}else if(typeof e.style.WebkitBoxShadow=="string"){c.css("-webkit-box-shadow",String.format("{0}px {0}px {0}px {1}",a.offset,a.color));return}var f=true;if(d.length<1){d=$("<div>");d.css({height:1,width:1}).attr("id",g+"Shadow").insertAfter(c);var j=c.css("zIndex");if(!j||j=="auto"){c.css("zIndex",a.zIndex);d.css("zIndex",a.zIndex-1)}var k=d.get(0);f=false}var i=c.is(":visible");!i&&c.show();var h=c.position();d.show().css({position:"absolute",width:c.outerWidth(),height:c.outerHeight(),opacity:a.opacity,background:a.color,left:h.left+a.offset-4,top:h.top+a.offset-2});d.css("filter","progid:DXImageTransform.Microsoft.Blur(makeShadow=true, pixelradius=3, shadowOpacity="+a.opacity.toString()+")");if(!i){d.hide();c.hide()}zIndex=c.css("zIndex");if(zIndex&&zIndex!="auto")d.css("zIndex",zIndex-1);else{c.css("zIndex",a.zIndex);d.css("zIndex",a.zIndex-1)}!f&&c.watch("left,top,width,height,display,opacity,zIndex",function(){if(c.is(":visible")){var b=c.position();d.css({position:"absolute",opacity:c.css("opacity")*a.opacity,width:c.outerWidth(),height:c.outerHeight(),opacity:a.opacity,background:a.color,left:b.left+a.offset-4,top:b.top+a.offset-2})}else d.hide()},100,"_shadowMove");a.callback&&a.callback(d)});return this};$.fn.tooltip=function(b,e,d){var a={cssClass:"",isHtml:false,shadowOffset:2,onRelease:null};$.extend(a,d);return this.each(function(){var d=new c(this,a);if(b=="hide"){d.hide();return}d.show(b,e,a.isHtml)});function c(f,e){var b=this,c=$(f);this.cssClass="";this.onRelease=null;$.extend(b,e);var d=c.get(0),a=$("#"+d.id+"_tt");this.show=function(h,f,j){a.length>0&&a.remove();a=$("<div>").attr("id",d.id+"_tt");$(document.body).append(a);a.css({position:"absolute",display:"none",zIndex:1e3});if(b.cssClass)a.addClass(b.cssClass);else a.css({background:"cornsilk",border:"solid 1px gray",fontSize:"0.80em",padding:2});if(j)a.html(h);else a.text(h);var i=c.position(),k=i.left+5,l=i.top+c.height()-2,g=a.width();if(g>400)g=400;a.css({left:k,top:l,width:g});a.show();a.shadow({offset:e.shadowOffset});f&&f>0&&setTimeout(function(){b.onRelease&&b.onRelease.call(d,b);b.hide()},f)};this.hide=function(){a.length>0&&a.fadeOut("slow",function(){a.shadow("hide")})}}};$.fn.watch=function(c,f,b,a){if(!b)b=100;if(!a)a="_watcher";return this.each(function(){var j=this,h=$(this),i=function(){e.call(j,a)},g={id:a,props:c.split(","),vals:[c.split(",").length],func:f,fnc:i,origProps:c,interval:b,intervalId:null};$.each(g.props,function(a){g.vals[a]=h.css(g.props[a])});h.data(a,g);d(h,a,g)});function d(d,c,a){d.each(function(){var d=$(this);if(typeof d.get(0).onpropertychange=="object")d.bind("propertychange."+c,a.fnc);else if($.browser.mozilla)d.bind("DOMAttrModified."+c,a.fnc);else a.intervalId=setInterval(a.fnc,b)})}function e(e){var c=$(this),a=c.data(e);if(!a)return;var h=this;if(!a.func)return;c.unwatch(e);var f=false,b=0;for(b;b<a.props.length;b++){var g=c.css(a.props[b]);if(a.vals[b]!=g){a.vals[b]=g;f=true;break}}f&&a.func.call(h,a,b);d(c,e,a)}};$.fn.unwatch=function(a){this.each(function(){var c=$(this),b=c.data(a);try{if(typeof this.onpropertychange=="object")c.unbind("propertychange."+a,b.fnc);else if($.browser.mozilla)c.unbind("DOMAttrModified."+a,b.fnc);else clearInterval(b.intervalId)}catch(d){}});return this};$.fn.listSetData=function(a,c){var b={noClear:false,dataValueField:null,dataTextField:null};$.extend(b,c);return this.each(function(){var d=$(this);if(a==null){d.children().remove();return}!b.noClear&&d.children().remove();if(a.Rows)a=a.Rows;else if(a.rows)a=a.rows;var e=false;if(!b.dataTextField&&!b.dataValueField)e=true;for(x=0;x<a.length;x++){var c=a[x];if(e)d.listAddItem(c,c);else d.listAddItem(c[b.dataTextField],c[b.dataValueField])}})};$.fn.listAddItem=function(b,a){return this.each(function(){$(this).append($("<option></option>").attr("value",a).text(b))})};$.fn.listSelectItem=function(c){if(this.length<1)return;var a=this.get(0);if(!a.options)return;for(var b=a.options.length-1;b>-1;b--)if(a.options[b].value==c){a.options[b].selected=true;return}return this};$.fn.listGetSelections=function(d){var a=this.find("option:selected");if(d)if(a.length>0)return b.eq(0).val();else return null;for(var b=[],c=0;c<a.length;c++)b.push(a.eq(c).val());return b};HoverPanel=function(e,d){var a=this,b=$(e),c=b.get(0),h=-1,g=0,f=0;this.serverUrl="";this.timeout=2e4;this.controlId=c.id;this.htmlTargetId=c.id;this.queryString="";this.eventHandlerMode="ShowHtmlAtMousePosition";this.postbackMode="Get";this.completed=null;this.errorHandler=null;this.hoverOffsetRight=0;this.hoverOffsetBottom=0;this.panelOpacity=1;this.shadowOffset=0;this.shadowOpacity=.25;this.adjustWindowPosition=true;this.formName="";this.navigateDelay=0;this.http=null;$.extend(a,d);this.startCallback=function(e,b,c,g){try{var f=(new Date).getTime();a.busy=f;var d=this.serverUrl;if(e){a.lastMouseTop=e.clientY;a.lastMouseLeft=e.clientX}else a.lastMouseTop=0;if(b==null)a.queryString=b="";else a.queryString=b;if(g)a.errorHandler=g;if(b)b+="&";else b="";b+="__WWEVENTCALLBACK="+a.controlId;a.formName=a.formName||document.forms[0];a.http=new HttpClient;a.timeout=a.timeout;a.http.appendHeader("RequestKey",f);if(c)c+="&";else c="";if(a.postbackMode=="Post")c+=$(a.formName).serialize();else if(this.postbackMode=="PostNoViewstate")c+=$(a.formName).serializeNoViewState();else if(this.postbackMode=="Get"&&c)b+=c;if(b!="")if(d.indexOf("?")>-1)d=d+"&"+b;else d=d+"?"+b;if(a.eventHandlerMode=="ShowIFrameAtMousePosition"||a.eventHandlerMode=="ShowIFrameInPanel"){setTimeout(function(){a.busy&&a.showIFrame.call(a,d)},a.navigateDelay);return}setTimeout(function(){a.busy==f&&a.http.send.call(a,d,c,a.onHttpCallback,a.onHttpCallback)},a.navigateDelay)}catch(e){a.onHttpCallback(new CallbackException(e.message))}};this.onHttpCallback=function(b){a.busy=-1;if(a.http&&a.http.status&&a.http.status!=200)b=new CallbackException(http.statusText);if(b==null)b=new CallbackException("No output was returned.");if(b.isCallbackError){a.errorHandler&&a.errorHandler(b);return}a.displayResult(b)};this.displayResult=function(b){if(a.completed&&a.completed(b,a)==false)return;if(a.eventHandlerMode=="ShowHtmlAtMousePosition"){a.assignContent(b);a.movePanelToPosition(a.lastMouseLeft+a.hoverOffsetRight,a.lastMouseTop+a.hoverOffsetBottom);a.show()}else if(a.eventHandlerMode=="ShowHtmlInPanel"){a.assignContent(b);a.show()}};this.assignContent=function(b){$("#"+a.htmlTargetId).html(b)};this.movePanelToPosition=function(c,e){try{b.css("position","absolute");if(typeof c=="object"){a.lastMouseTop=c.clientY;a.lastMouseLeft=c.clientX}else if(typeof c=="number"){a.lastMouseTop=e;a.lastMouseLeft=c}c=a.lastMouseLeft+3;e=a.lastMouseTop+3;var d=$(window);b.css({left:c+d.scrollLeft(),top:e+d.scrollTop()});if(a.adjustWindowPosition&&document.body){var f=d.height(),h=b.outerHeight(),g=d.width(),i=b.outerWidth();if(f<h)e=0;else if(f<a.lastMouseTop+h)e=f-h-10;if(g<i)c=0;else if(g<a.lastMouseLeft+i)c=g-i-25;b.css({left:c+d.scrollLeft(),top:e+d.scrollTop()})}}catch(j){window.status="Moving of window failed: "+j.message}};this.showIFrame=function(b){a.busy=false;b=b?b:a.serverUrl;$("#"+a.controlId+"_IFrame").attr("src",b).load(a.completed);a.show();a.eventHandlerMode=="ShowIFrameAtMousePosition"&&a.movePanelToPosition(a.lastMouseLeft+a.hoverOffsetRight,a.lastMouseTop+a.hoverOffsetBottom)};this.hide=function(){this.abort();b.hide()};this.abort=function(){a.busy=-1};this.show=function(){b.show().css("opacity",a.panelOpacity);a.shadowOffset&&b.shadow({offset:a.shadowOffset,opacity:a.shadowOpacity})}};_ModalDialog=function(d,e){var a=this,b=$(d);if(b.length<1)b=$("#"+d);if(b.length<1)return;this.overlayId="_ModalOverlay";this.contentId=b.get(0).id;this.headerId="";this.backgroundOpacity=.75;this.fadeInBackground=false;this.zIndex=0;this.jOverlay=null;this.keepCentered=true;this.dialogHandler=null;$.extend(a,e);var c=null;this.show=function(e,d,f){if(a.contentId&&typeof e=="string")!f?$("#"+a.contentId).text(e):$("#"+a.contentId).html(e);if(a.headerId&&typeof d=="string")!f?$("#"+a.headerId).text(d):$("#"+a.headerId).html(d);var h=a.zIndex>0?a.zIndex:$.maxZIndex();b.css({zIndex:a.zIndex+2}).show().centerInClient();var g=opaqueOverlay({zIndex:a.zIndex+1,sel:"#"+a.overlayId,opacity:a.backgroundOpacity});a.zIndex++;a.fadeInBackground&&g.hide().fadeIn("slow");b.click(a.callback);a.keepCentered&&$(window).bind("resize.modal",function(){b.centerInClient()}).bind("scroll.modal",function(){b.centerInClient()});if($.browser.msie&&$.browser.version<"7")c=$("select:visible").not($(b).find("select")).hide()};this.hide=function(){b.hide();a.keepCentered&&$(window).unbind("resize.modal").unbind("scroll.modal");opaqueOverlay("hide",{sel:"#"+a.overlayId});b.unbind("click");if(c){c.show();c=null}};this.callback=function(b){if($(b.target).is(":button,a")){if(a.dialogHandler){if(a.dialogHandler.call(b.target,b,a)==false)return;setTimeout(function(){a.hide()},10);return}setTimeout(function(){a.hide()},10)}}};$.fn.modalDialog=function(a,h,g,f){if(this.length<1)return this;var e=this.get(0),c=$(e),d="modal"+e.id,b=c.data(d);if(!b)b=new _ModalDialog(c,a);if(typeof a=="string"){(a=="hide"||a=="close")&&b.hide();if(a=="instance"||a=="get")return b;return}b.show(h,g,f);c.data(d,b);return this};$.modalDialog=function(k,f,b,c,g){var a=$("#_MBOX");if(a.length<1){a=$("<div>").addClass("blackborder dragwindow").attr("id","_MBOX").css({width:400});var h=$("<div>").addClass("gridheader").attr("id","_MBOXHEADER"),j=$("<div>").addClass("containercontent").attr("id","_MBOXCONTENT");a.append(h).append(j);var e=$("<div>").css("margin","5px 15px");if(!b)b=[" Close "];for(var d=0;d<b.length;d++){var i=$("<input type='button' />").attr("id","_BTN_"+d).css("margin-right","5px").val(b[d]);e.append(i)}a.append(e).appendTo(document.body)}if(!c)c=function(){if(this.id.substr(0,5)=="_BTN_"||$(this).hasClass("closebox"))return true;return false};a.modalDialog({dialogHandler:c,headerId:"_MBOXHEADER",contentId:"_MBOXCONTENT"},k,f,g).draggable().shadow().closable({closeHandler:c||function(){a.modalDialog("hide")}})};opaqueOverlay=function(c,f){var e=this,b=$(window);this.sel="#_ShadowOverlay";this.opacity=.75;this.zIndex=1e4;$.extend(this,f||c);var a=$(sel);if(c=="hide"){if(a.length<1)return;a.hide();a.get(0).opaqueOverlay=false;b.unbind("resize.opaque").unbind("scroll.opaque");return}if(a.length<1)a=$("<div>").attr("id",this.sel.substr(1)).css("background","black").appendTo(document.body);var d=a.get(0);a.show();!d.opaqueOverlay&&b.bind("resize.opaque",function(){opaqueOverlay(c)}).bind("scroll.opaque",function(){opaqueOverlay(c)});d.opaqueOverlay=true;a.css({top:0+b.scrollTop(),left:0+b.scrollLeft(),position:"absolute",opacity:e.opacity,zIndex:e.zIndex}).width(b.width()).height(b.height());return a};if(!$.fn.draggable){$.fn.draggable=function(a){return this.each(function(){var c=$(this),b=c.data("draggable");if(typeof a=="string"){if(b&&a=="remove"){b.stopDragging();c.removeData("draggable")}return}if(!b){b=new DragBehavior(this,a);c.data("draggable",b)}})};var __dragIndex=1;DragBehavior=function(k,j){var a=this,b=$(k);this.handle="";this.opacity=.75;this.start=null;this.stop=null;this.dragDelay=100;this.forceAbsolute=false;$.extend(a,j);a.handle=a.handle?$(a.handle,b):b;if(a.handle.length<1)a.handle=b;var c=false,d=false,m=0,l=-1,g=0,h=0,f=1,i=0;this.mouseDown=function(e){var f=a.handle.get(0),j=false;$(e.target).parents().each(function(){if(this==f)j=true});if(c||e.target!=f&&!j||$(e.target).is(".closebox,input,textara,a"))return;c=true;d=false;var i=a.handle.offset();g=e.pageX-i.left;h=e.pageY-i.top;setTimeout(function(){if(!c)return;b.show().makeAbsolute(a.forceAbsolute);a.dragActivate(e)},a.dragDelay)};var e=function(a){a.stopPropagation();a.preventDefault()};this.dragActivate=function(g){if(!c)return;d=true;a.moveToMouse(g);c=true;i=b.css("zIndex");b.css("zIndex",1.5e5);f=b.css("opacity");b.css({opacity:a.opacity,cursor:"move"});$(document).bind("mousemove.dbh",a.mouseMove);$(document).bind("selectstart.dbh",e);$(document).bind("dragstart.dbh",e);$(document.body).bind("dragstart.dbh",e);$(document.body).bind("selectstart.dbh",e);a.handle.bind("selectstart.dbh",e);a.start&&a.start(g,a)};this.dragDeactivate=function(g,e){if(!c)return;c=false;if(!d)return;d=false;!e&&a.moveToMouse(g);$(document).unbind("mousemove.dbh");$(document).unbind("selectstart.dbh");$(document).unbind("dragstart.dbh");$(document.body).unbind("dragstart.dbh");$(document.body).unbind("selectstart.dbh");a.handle.unbind("selectstart.dbh");if(!e){__dragIndex+=10;b.css({zIndex:1e4+__dragIndex,cursor:"auto"});b.css("opacity",f);a.stop&&a.stop(g,a)}};this.mouseUp=function(b){a.dragDeactivate(b)};this.mouseMove=function(b){c&&a.moveToMouse(b)};this.moveToMouse=function(a){b.css({left:a.pageX-g,top:a.pageY-h})};this.stopDragging=function(){if(!d)return;a.dragDeactivate(null,true);$(document).unbind("mousedown",a.mouseDown)};$(document).mousedown(a.mouseDown);$(document).mouseup(a.mouseUp)}}$.fn.closable=function(b){var a={handle:null,closeHandler:null,cssClass:"closebox",imageUrl:null,fadeOut:null};$.extend(a,b);return this.each(function(){var b=$(this),d=b.css("position");(!d||d=="static")&&b.css("position","relative");var e=a.handle?$(a.handle).css({position:"relative"}):b,c=a.imageUrl?$("<img />").attr("src",a.imageUrl).css("cursor","pointer"):$("<div></div>");c.addClass(a.cssClass).click(function(c){if(a.closeHandler)if(!a.closeHandler.call(this,c))return;if(a.fadeOut)$(b).fadeOut(a.fadeOut);else $(b).hide()});a.imageUrl&&c.css("background-image","none");e.append(c)})};$.fn.contentEditable=function(c){if(this.length<1)return;var b="0px",a={editClass:null,saveText:"Save",saveHandler:null};$.extend(a,c);this.each(function(){var c=$(this);if(this.contentEditable=="true")return this;var d=$("<input type='button' value='"+a.saveText+"' class='editablebutton' style='display: block;'/>"),e=function(){if(a.editClass)c.removeClass(a.editClass);else c.css({background:"transparent",padding:b});c.get(0).contentEditable=false;d.remove()};d.click(function(b){a.saveHandler.call(c.get(0),b)&&e()});c.keypress(function(a){a.keyCode==27&&e()});c.after(d).css("margin",2);this.contentEditable=true;if(a.editClass)c.addClass(a.editClass);else{b=c.css("padding");c.css({background:"lavender",padding:10})}return this});return this};$.fn.editable=function(b){if(this.length<1)return this;var c="0px",a={editClass:null,saveText:"Save",editMode:"text",saveHandler:null,value:null};$.extend(a,b);this.each(function(){var c=$(this);if(b=="cleanup"){c.data("cleanupEditor")();return this}if(c.data("editing"))return this;var e=$("<input type='button' />").addClass("editablebutton").css({display:"block"}).val(a.saveText),d=$("<textarea id='_contenteditor'></textarea>").css({fontFamily:c.css("font-family"),minHeight:"18px"});if(a.value)d.val(a.value);else d.val(a.editMode=="text"?c.text():jContext.html());if(a.editClass)d.addClass(a.editClass);else d.width(c.width()-10).height(c.height());d.focus().hide().fadeIn("slow").data("editing",c.get(0)).insertBefore(c).keypress(function(a){a.keyCode==27&&cleanupEditor()});c.data("editing",true).hide();c.data("cleanupEditor",function(){d.remove();e.remove();c.data("editing",false).data("cleanupEditor",null).fadeIn("slow")});e.click(function(){var b={text:d.val(),cleanup:c.data("cleanupEditor"),button:e,edit:d,content:c};a.saveHandler.call(d.get(0),b)&&cleanupEditor()});d.after(e).css("margin",2);return this});return this};$.maxZIndex=$.fn.maxZIndex=function(c){var b={inc:10,group:"*"};$.extend(b,c);var a=0;$(b.group).each(function(){var b=parseInt($(this).css("z-index"));a=b>a?b:a});if(!this.jquery)return a;return this.each(function(){a+=b.inc;$(this).css("z-index",a)})};var _tmplCache={};parseTemplate=function(b,f){var c="";try{var a=_tmplCache[b];if(!a){var e="var p=[];with(obj){p.push('"+b.replace(/[\r\t\n]/g," ").replace(/'(?=[^#]*#>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<#=(.+?)#>/g,"',$1,'").split("<#").join("');").split("#>").join("p.push('")+"');}return p.join('');";a=new Function("obj",e);_tmplCache[b]=a}return a(f)}catch(d){c=d.message}return "< # ERROR: "+c.htmlEncode()+" # >"};$$=function(b,c){var a=$("#"+b,c);if(a.length<1)a=$("[id$=_"+b+"],[id*=["+b+"_]",c);return a};String.prototype.htmlEncode=function(){var a=document.createElement("div");if(typeof a.textContent=="string")a.textContent=this.toString();else a.innerText=this.toString();return a.innerHTML};String.prototype.trimEnd=function(a){if(a)return this.replace(new RegExp(a.escapeRegExp()+"*$"),"");return this.replace(/\s+$/,"")};String.prototype.trimStart=function(a){if(a)return this.replace(new RegExp("^"+a.escapeRegExp()+"*"),"");return this.replace(/^\s+/,"")};String.repeat=function(d,c){for(var a="",b=0;b<c;b++)a+=d;return a};String.prototype.padL=function(a,b){if(!a||a<1)return this;if(!b)b=" ";var c=a-this.length;if(c<1)return this.substr(0,a);return (String.repeat(b,c)+this).substr(0,a)};String.prototype.padR=function(a,b){if(!a||a<1)return this;if(!b)b=" ";var c=a-this.length;c<1&&this.substr(0,a);return (this+String.repeat(b,c)).substr(0,a)};String.startsWith=function(a){if(!a)return false;return this.substr(0,a.length)==a};String.prototype.escapeRegExp=function(){return this.replace(/[.*+?^${}()|[\]\/\\]/g,"\\$0")};String.format=function(b){for(var a=0;a<arguments.length;a++)b=b.replace(new RegExp("\\{"+a.toString()+"\\}","g"),arguments[a+1]);return b};String.prototype.format=function(){var a=[this];$.merge(a,arguments);return String.format.apply(this,a)};String.prototype.isNumber=function(){if(this.length==0)return false;if("0123456789".indexOf(this.charAt(0))>-1)return true;return false};var _monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.prototype.formatDate=function(a){var c=this;if(!a)a="MM/dd/yyyy";var d=c.getMonth(),e=c.getFullYear();if(a.indexOf("yyyy")>-1)a=a.replace("yyyy",e.toString());else if(a.indexOf("yy")>-1)a=a.replace("yy",e.toString().substr(2,2));a=a.replace("dd",c.getDate().toString().padL(2,"0"));var b=c.getHours();if(a.indexOf("t")>-1)if(b>11)a=a.replace("t","pm");else a=a.replace("t","am");if(a.indexOf("HH")>-1)a=a.replace("HH",b.toString().padL(2,"0"));if(a.indexOf("hh")>-1){if(b>12)b-=12;if(b==0)b=12;a=a.replace("hh",b.toString().padL(2,"0"))}if(a.indexOf("mm")>-1)a=a.replace("mm",c.getMinutes().toString().padL(2,"0"));if(a.indexOf("ss")>-1)a=a.replace("ss",c.getSeconds().toString().padL(2,"0"));if(a.indexOf("MMMM")>-1)a=a.replace("MMMM",_monthNames[d]);else if(a.indexOf("MMM")>-1)a=a.replace("MMM",_monthNames[d].substr(0,3));else a=a.replace("MM",(d+1).toString().padL(2,"0"));return a};Number.prototype.formatNumber=function(b,f){var a=this,d=Number.getNumberFormat();if(b=="c"){a=Math.round(a*100)/100;f=f||"$";a=a.toLocaleString();var g=a.split("."),l=g.length>1?g[1]:"";return f+g[0]+d.d+l.padR(2,"0")}if(b.charAt(0)=="n"){if(b.length==1)return a.toLocaleString();var c=b.substr(1);c=parseInt(c);if(typeof c!="number")return a.toLocaleString();a=a.toFixed(c);var h=a.split(d.d),e=h[0],k=h.length>1?d.d+h[1]:"",i=/(\d+)(\d{3})/;while(i.test(e))e=e.replace(i,"$1"+d.c+"$2");return e+k}if(b.charAt(0)=="f"){if(b.length==1)return a.toString();var j=b.substr(1);j=parseFloat(c);if(typeof c!="number")return a.toString();return a.toFixed(c)}return a.toString()};Number.getNumberFormat=function(c){var b=1000.1.toLocaleString(),a={};a.d=b.charAt(5);if(a.d.isNumber())a.d=b.charAt(4);a.c=b.charAt(1);if(a.c.isNumber())a.c=",";a.s=c||"$";return a};registerNamespace=function(e){for(var d=e.split("."),a=window,f="",c=0;c<d.length;c++){var b=d[c];if(a[b])a=a[b];else a=a[b]={}}};getUrlEncodedKey=function(c,b){if(!b)b=window.location.search;var d=new RegExp("[?|&]"+c+"=(.*?)&"),a=d.exec(b+"&");if(!a||a.length<2)return "";return decodeURIComponent(a[1].replace("+"," "))};setUrlEncodedKey=function(c,d,b){b=b||window.location.search;var a=b+"&",e=new RegExp("[?|&]"+c+"=.*?&");if(!e.test(a))a+=c+"="+encodeURI(d);else a=a.replace(e,"&"+c+"="+encodeURIComponent(d)+"&");a=a.trimStart("&").trimEnd("&");return a.charAt(0)=="?"?a:(a="?"+a)};$.fn.serializeNoViewState=function(){return this.find("input,textarea,select,hidden").not("#__VIEWSTATE,#__EVENTVALIDATION").serialize()};$.fn.makeAbsolute=function(a){return this.each(function(){var b=$(this),c=b.position();b.css({position:"absolute",marginLeft:0,marginTop:0,top:c.top,left:c.left});a&&b.remove().appendTo("body")})};if(!this.assert)this.assert=function(b,a){if(b)return;if(!a)a="";alert("Assert failed\r\n"+(a?a:"")+"\r\n"+(arguments.callee.caller?"in "+arguments.callee.caller.toString():""))};var _ud="undefined";if(!this.JSON)this.JSON={};(function(){function f(a){return a<10?"0"+a:a}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(a){escapable.lastIndex=0;return escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(h,i){var d,e,c,f,g=gap,b,a=i[h];if(a&&typeof a==="object"&&typeof a.toJSON==="function")a=a.toJSON(h);if(typeof rep==="function")a=rep.call(i,h,a);switch(typeof a){case "string":return quote(a);case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);case "object":if(!a)return "null";gap+=indent;b=[];if(Object.prototype.toString.apply(a)==="[object Array]"){f=a.length;for(d=0;d<f;d+=1)b[d]=str(d,a)||"null";c=b.length===0?"[]":gap?"[\n"+gap+b.join(",\n"+gap)+"\n"+g+"]":"["+b.join(",")+"]";gap=g;return c}if(rep&&typeof rep==="object"){f=rep.length;for(d=0;d<f;d+=1){e=rep[d];if(typeof e==="string"){c=str(e,a);c&&b.push(quote(e)+(gap?": ":":")+c)}}}else for(e in a)if(Object.hasOwnProperty.call(a,e)){c=str(e,a);c&&b.push(quote(e)+(gap?": ":":")+c)}c=b.length===0?"{}":gap?"{\n"+gap+b.join(",\n"+gap)+"\n"+g+"}":"{"+b.join(",")+"}";gap=g;return c}}if(typeof JSON.stringify!=="function")JSON.stringify=function(d,a,b){var c;gap="";indent="";if(typeof b==="number")for(c=0;c<b;c+=1)indent+=" ";else if(typeof b==="string")indent=b;rep=a;if(a&&typeof a!=="function"&&(typeof a!=="object"||typeof a.length!=="number"))throw new Error("JSON.stringify");return str("",{"":d})};if(typeof JSON.parse!=="function")JSON.parse=function(text,reviver){var j;function walk(d,e){var b,c,a=d[e];if(a&&typeof a==="object")for(b in a)if(Object.hasOwnProperty.call(a,b)){c=walk(a,b);if(c!==undefined)a[b]=c;else delete a[b]}return reviver.call(d,e,a)}cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(a){return "\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}})();if(this.JSON&&!this.JSON.parseWithDate){var reISO=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,reMsAjax=/^\/Date\((d|-|.*)\)[\/|\\]$/;JSON.parseWithDate=function(a){try{var b=JSON.parse(a,function(d,b){if(typeof b==="string"){var a=reISO.exec(b);if(a)return new Date(Date.UTC(+a[1],+a[2]-1,+a[3],+a[4],+a[5],+a[6]));a=reMsAjax.exec(b);if(a){var c=a[1].split(/[-+,.]/);return new Date(c[0]?+c[0]:0-+c[1])}}return b});return b}catch(c){throw new Error("JSON content could not be parsed");return null}};JSON.stringifyWcf=function(a){return JSON.stringify(a,function(d,b){if(typeof b=="string"){var a=reISO.exec(b);if(a){var c="/Date("+(new Date(Date.UTC(+a[1],+a[2]-1,+a[3],+a[4],+a[5],+a[6]))).getTime()+")/";this[d]=c;return c}}return b})};JSON.dateStringToDate=function(b){var a=reISO.exec(b);if(a)return new Date(Date.UTC(+a[1],+a[2]-1,+a[3],+a[4],+a[5],+a[6]));a=reMsAjax.exec(b);if(a){var c=a[1].split(/[-,.]/);return new Date(+c[0])}return null}}})(jQuery)